<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>@wxn0brp/db</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">@wxn0brp/db</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="database-class-documentation"><a class="header" href="#database-class-documentation">DataBase Class Documentation</a></h1>
<p>This documentation provides a detailed overview of the <code>DataBase</code> class, designed for performing CRUD operations on database collections. The class uses the <code>dbActionC</code> module for file-based operations and <code>executorC</code> for managing execution tasks.</p>
<h2 id="class-database"><a class="header" href="#class-database">Class: <code>DataBase</code></a></h2>
<h3 id="constructor-databasefolder-options"><a class="header" href="#constructor-databasefolder-options">Constructor: <code>DataBase(folder, options={})</code></a></h3>
<p>Creates a new instance of the <code>DataBase</code> class.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>folder</code> (<code>string</code>): The folder path where the database files are stored.</li>
<li><code>options</code> (<code>object</code>): Optional configuration options.
<ul>
<li><code>cacheThreshold</code> (<code>number</code>, default: 3): The threshold for caching entries.</li>
<li><code>cacheTTL</code> (<code>number</code>, default: 300000): Time-to-live for cache entries in milliseconds (default: 5 minutes).</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="method-ccollection"><a class="header" href="#method-ccollection">Method: <code>c(collection)</code></a></h3>
<p>Creates a new instance of the <code>CollectionManager</code> class for the specified collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>CollectionManager</code>: A new instance of <code>CollectionManager</code>.</li>
</ul>
</li>
</ul>
<h3 id="method-async-getcollections"><a class="header" href="#method-async-getcollections">Method: <code>async getCollections()</code></a></h3>
<p>Gets the names of all available collections in the database.</p>
<ul>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;string[]&gt;</code>: A promise that resolves with an array of collection names.</li>
</ul>
</li>
</ul>
<h3 id="method-async-checkcollectioncollection"><a class="header" href="#method-async-checkcollectioncollection">Method: <code>async checkCollection(collection)</code></a></h3>
<p>Checks and creates the specified collection if it doesn't exist.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection to check.</li>
</ul>
</li>
</ul>
<h3 id="method-async-issetcollectioncollection"><a class="header" href="#method-async-issetcollectioncollection">Method: <code>async issetCollection(collection)</code></a></h3>
<p>Checks if a collection exists.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the collection exists, otherwise <code>false</code>.</li>
</ul>
</li>
</ul>
<h3 id="method-async-addcollection-data-id_gentrue"><a class="header" href="#method-async-addcollection-data-id_gentrue">Method: <code>async add(collection, data, id_gen=true)</code></a></h3>
<p>Adds data to a specified collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>data</code> (<code>Object</code>): The data to add.</li>
<li><code>id_gen</code> (<code>boolean</code>, default: true): Whether to generate an ID for the entry.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object&gt;</code>: A promise that resolves with the added data.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findcollection-search-context-options-findopts"><a class="header" href="#method-async-findcollection-search-context-options-findopts">Method: <code>async find(collection, search, context={}, options={}, findOpts={})</code></a></h3>
<p>Finds data in a collection based on a query.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
<li><code>options</code> (<code>Object</code>): Search options.
<ul>
<li><code>max</code> (<code>number</code>, default: -1): Maximum number of entries to return.</li>
<li><code>reverse</code> (<code>boolean</code>, default: false): Whether to reverse the search results.</li>
</ul>
</li>
<li><code>findOpts</code> (<code>Object</code>): Options for updating the search result.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Array&lt;Object&gt;&gt;</code>: A promise that resolves with the matching data.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findonecollection-search-context-findopts"><a class="header" href="#method-async-findonecollection-search-context-findopts">Method: <code>async findOne(collection, search, context={}, findOpts={})</code></a></h3>
<p>Finds one matching entry in a collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
<li><code>findOpts</code> (<code>Object</code>): Options for updating the search result.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object|null&gt;</code>: A promise that resolves with the found entry, or <code>null</code> if no match is found.</li>
</ul>
</li>
</ul>
<h3 id="method-async-updatecollection-search-arg-context"><a class="header" href="#method-async-updatecollection-search-arg-context">Method: <code>async update(collection, search, arg, context={})</code></a></h3>
<p>Updates data in a collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>arg</code> (<code>function|Object</code>): Update arguments.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is updated.</li>
</ul>
</li>
</ul>
<h3 id="method-async-updateonecollection-search-arg-context"><a class="header" href="#method-async-updateonecollection-search-arg-context">Method: <code>async updateOne(collection, search, arg, context={})</code></a></h3>
<p>Updates one entry in a collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>arg</code> (<code>function|Object</code>): Update arguments.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is updated.</li>
</ul>
</li>
</ul>
<h3 id="method-async-updateoneoraddcollection-search-arg-add_arg-context-id_gentrue"><a class="header" href="#method-async-updateoneoraddcollection-search-arg-add_arg-context-id_gentrue">Method: <code>async updateOneOrAdd(collection, search, arg, add_arg={}, context={}, id_gen=true)</code></a></h3>
<p>Updates one entry or adds a new one if it doesn't exist.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>arg</code> (<code>function|Object</code>): Update arguments.</li>
<li><code>add_arg</code> (<code>function|Object</code>): Data to add if no match is found.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
<li><code>id_gen</code> (<code>boolean</code>, default: true): Whether to generate an ID for the new entry.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the entry was updated, otherwise <code>false</code>.</li>
</ul>
</li>
</ul>
<h3 id="method-async-removecollection-search-context"><a class="header" href="#method-async-removecollection-search-context">Method: <code>async remove(collection, search, context={})</code></a></h3>
<p>Removes data from a collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the data is removed.</li>
</ul>
</li>
</ul>
<h3 id="method-async-removeonecollection-search-context"><a class="header" href="#method-async-removeonecollection-search-context">Method: <code>async removeOne(collection, search, context={})</code></a></h3>
<p>Removes one entry from a collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>search</code> (<code>function|Object</code>): The search query.</li>
<li><code>context</code> (<code>Object</code>): The context object (for functions).</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves when the entry is removed.</li>
</ul>
</li>
</ul>
<h3 id="method-removecollectioncollection"><a class="header" href="#method-removecollectioncollection">Method: <code>removeCollection(collection)</code></a></h3>
<p>Removes the specified collection from the database file system.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection to remove.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>void</code></li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="predefined-search-options-quick-reference"><a class="header" href="#predefined-search-options-quick-reference">Predefined Search Options Quick Reference</a></h1>
<h2 id="operators"><a class="header" href="#operators">Operators</a></h2>
<h3 id="logical-operators"><a class="header" href="#logical-operators">Logical Operators</a></h3>
<h4 id="and"><a class="header" href="#and">$and</a></h4>
<p>Checks if all conditions in an array are true.</p>
<pre><code class="language-javascript">{
  $and: [
    { $gt: { age: 20 } },
    { $exists: { name: true } }
  ]
}
</code></pre>
<h4 id="or"><a class="header" href="#or">$or</a></h4>
<p>Checks if at least one condition in an array is true.</p>
<pre><code class="language-javascript">{
  $or: [
    { $lt: { age: 20 } },
    { $gt: { age: 60 } }
  ]
}
</code></pre>
<h4 id="not"><a class="header" href="#not">$not</a></h4>
<p>Negates a condition.</p>
<pre><code class="language-javascript">{
  $not: { $type: { age: "string" } }
}
</code></pre>
<h3 id="comparison-operators"><a class="header" href="#comparison-operators">Comparison Operators</a></h3>
<h4 id="gt"><a class="header" href="#gt">$gt</a></h4>
<p>Greater than comparison.</p>
<pre><code class="language-javascript">{ $gt: { age: 18 } }
</code></pre>
<h4 id="lt"><a class="header" href="#lt">$lt</a></h4>
<p>Less than comparison.</p>
<pre><code class="language-javascript">{ $lt: { score: 100 } }
</code></pre>
<h4 id="gte"><a class="header" href="#gte">$gte</a></h4>
<p>Greater than or equal comparison.</p>
<pre><code class="language-javascript">{ $gte: { price: 9.99 } }
</code></pre>
<h4 id="lte"><a class="header" href="#lte">$lte</a></h4>
<p>Less than or equal comparison.</p>
<pre><code class="language-javascript">{ $lte: { quantity: 50 } }
</code></pre>
<h4 id="in"><a class="header" href="#in">$in</a></h4>
<p>Checks if value is in an array.</p>
<pre><code class="language-javascript">{ $in: { status: ["active", "pending"] } }
</code></pre>
<h4 id="nin"><a class="header" href="#nin">$nin</a></h4>
<p>Checks if value is not in an array.</p>
<pre><code class="language-javascript">{ $nin: { category: ["archived", "deleted"] } }
</code></pre>
<h4 id="between"><a class="header" href="#between">$between</a></h4>
<p>Checks if a number is between two values (inclusive).</p>
<pre><code class="language-javascript">{ $between: { age: [18, 65] } }
</code></pre>
<h3 id="type-and-existence-operators"><a class="header" href="#type-and-existence-operators">Type and Existence Operators</a></h3>
<h4 id="exists"><a class="header" href="#exists">$exists</a></h4>
<p>Checks if a field exists (or doesn't exist).</p>
<pre><code class="language-javascript">{ $exists: { email: true, deletedAt: false } }
</code></pre>
<h4 id="type"><a class="header" href="#type">$type</a></h4>
<p>Checks the type of a field.</p>
<pre><code class="language-javascript">{ $type: { age: "number", name: "string" } }
</code></pre>
<h3 id="array-operators"><a class="header" href="#array-operators">Array Operators</a></h3>
<h4 id="arrinc"><a class="header" href="#arrinc">$arrinc</a></h4>
<p>Checks if an array includes at least one of the specified values.</p>
<pre><code class="language-javascript">{ $arrinc: { tags: ["developer", "designer"] } }
</code></pre>
<h4 id="arrincall"><a class="header" href="#arrincall">$arrincall</a></h4>
<p>Checks if an array includes all of the specified values.</p>
<pre><code class="language-javascript">{ $arrincall: { permissions: ["read", "write"] } }
</code></pre>
<h4 id="size"><a class="header" href="#size">$size</a></h4>
<p>Checks the length of an array or string.</p>
<pre><code class="language-javascript">{ $size: { tags: 3 } }
</code></pre>
<h3 id="string-operators"><a class="header" href="#string-operators">String Operators</a></h3>
<h4 id="regex"><a class="header" href="#regex">$regex</a></h4>
<p>Tests a string against a regular expression.</p>
<pre><code class="language-javascript">{ $regex: { email: /^[^@]+@[^@]+\.[^@]+$/ } }
</code></pre>
<h4 id="startswith"><a class="header" href="#startswith">$startsWith</a></h4>
<p>Checks if a string starts with a specified value.</p>
<pre><code class="language-javascript">{ $startsWith: { name: "Dr." } }
</code></pre>
<h4 id="endswith"><a class="header" href="#endswith">$endsWith</a></h4>
<p>Checks if a string ends with a specified value.</p>
<pre><code class="language-javascript">{ $endsWith: { email: "@example.com" } }
</code></pre>
<h3 id="other-operators"><a class="header" href="#other-operators">Other Operators</a></h3>
<h4 id="subset"><a class="header" href="#subset">$subset</a></h4>
<p>Allows for skipping advanced validation for specific fields, applying only basic validation. This is useful when validation data may conflict with predefined functions (starting with $), while user data might also contain similar keys. Use this operator as a compromise.</p>
<pre><code class="language-javascript">{ $subset: { $lt: "John Doe" } } // chcek if "$lt" is "John Doe"
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="complex-validation"><a class="header" href="#complex-validation">Complex Validation</a></h3>
<pre><code class="language-javascript">const criteria = {
  $and: [
    {
      $or: [
        { $gt: { age: 18 } },
        { $exists: { guardianConsent: true } }
      ]
    },
    {
      $type: { email: "string" },
      $regex: { email: /^[^@]+@[^@]+\.[^@]+$/ }
    },
    {
      $arrincall: { roles: ["user"] },
      $not: { $in: { status: ["banned", "suspended"] } }
    }
  ]
};

const user = {
  age: 16,
  guardianConsent: true,
  email: "john@example.com",
  roles: ["user", "premium"],
  status: "active"
};

const isValid = hasFieldsAdvanced(user, criteria); // true
</code></pre>
<h3 id="nested-conditions"><a class="header" href="#nested-conditions">Nested Conditions</a></h3>
<pre><code class="language-javascript">const criteria = {
  $and: [
    {
      $exists: { address: true },
      $type: { address: "object" }
    },
    {
      $or: [
        { $exists: { "address.zipCode": true } },
        {
          $and: [
            { $exists: { "address.city": true } },
            { $exists: { "address.country": true } }
          ]
        }
      ]
    }
  ]
};

const user = {
  address: {
    city: "New York",
    country: "USA"
  }
};

const isValid = hasFieldsAdvanced(user, criteria); // true
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>The function will throw an error if:</p>
<ul>
<li>The <code>fields</code> parameter is not an object</li>
<li>The <code>fields</code> parameter is null</li>
</ul>
<p>Always wrap the function call in a try-catch block when using with untrusted input:</p>
<pre><code class="language-javascript">try {
  const isValid = hasFieldsAdvanced(obj, criteria);
  // Handle result
} catch (error) {
  // Handle error
  console.error('Validation error:', error.message);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="predefined-find-options-quick-reference-post-data-matching-processing"><a class="header" href="#predefined-find-options-quick-reference-post-data-matching-processing">Predefined Find Options Quick Reference (Post Data-Matching Processing)</a></h3>
<h2 id="description"><a class="header" href="#description"><strong>Description</strong></a></h2>
<p>These options are applied as part of a <strong>post-processing step</strong> after matching objects are found in the database (<code>find</code> stage) but before the data is returned to the client.<br />
This process is designed to:</p>
<ol>
<li><strong>Reduce data transfer size</strong> by removing unnecessary fields or selecting only the required ones.</li>
<li><strong>Customize results</strong> by transforming objects to meet specific requirements.</li>
</ol>
<p>This optimization improves both performance and result usability, ensuring the client receives precisely the needed data in a compact form.</p>
<hr />
<h2 id="execution-stack"><a class="header" href="#execution-stack"><strong>Execution Stack</strong></a></h2>
<ol>
<li><strong><code>transform</code></strong></li>
<li><strong><code>exclude</code></strong></li>
<li><strong><code>select</code></strong></li>
</ol>
<hr />
<h2 id="operators-1"><a class="header" href="#operators-1"><strong>Operators</strong></a></h2>
<h3 id="select"><a class="header" href="#select"><strong><code>select</code></strong></a></h3>
<p>Selects only specific fields to include in the final object.</p>
<pre><code class="language-javascript">// Original Object
{
    name: "John Doe",
    email: "john@example.com",
    age: 30,
    status: "active"
}

// Find Options
{
    select: ["name", "email"]
}

// Result
{
    name: "John Doe",
    email: "john@example.com"
}
</code></pre>
<hr />
<h3 id="exclude"><a class="header" href="#exclude"><strong><code>exclude</code></strong></a></h3>
<p>Excludes specific fields from the object, removing unwanted data.</p>
<pre><code class="language-javascript">// Original Object
{
    name: "John Doe",
    email: "john@example.com",
    age: 30,
    status: "active"
}

// Find Options
{
    exclude: ["name"]
}

// Result
{
    email: "john@example.com",
    age: 30,
    status: "active"
}
</code></pre>
<hr />
<h3 id="transform"><a class="header" href="#transform"><strong><code>transform</code></strong></a></h3>
<p>Applies a custom updater function to modify the object.</p>
<pre><code class="language-javascript">// Original Object
{
    name: "John Doe",
    email: "john@example.com",
    age: 30,
    status: "active"
}

// Find Options
{
    transform: (doc) =&gt; {
        doc.name = doc.name.toUpperCase();
        return doc;
    }
}

// Result
{
    name: "JOHN DOE",
    email: "john@example.com",
    age: 30,
    status: "active"
}
</code></pre>
<hr />
<h3 id="combined-example"><a class="header" href="#combined-example"><strong>Combined Example</strong></a></h3>
<p>Using all operators together to demonstrate the execution stack.</p>
<pre><code class="language-javascript">// Original Object
{
    name: "John Doe",
    email: "john@example.com",
    age: 30,
    status: "active"
}

// Find Options
{
    transform: (doc) =&gt; {
        doc.newField = "added";
        doc.status = "inactive";
        return doc;
    },
    exclude: ["email", "newField"],
    select: ["name", "status"]
}

// Execution Steps:
1. transform:
   {
       name: "John Doe",
       email: "john@example.com",
       age: 30,
       status: "inactive",
       newField: "added"
   }
2. exclude:
   {
       name: "John Doe",
       age: 30,
       status: "inactive"
   }
3. select:
   {
       name: "John Doe",
       status: "inactive"
   }

// Final Result:
{
    name: "John Doe",
    status: "inactive"
}
</code></pre>
<hr />
<p>This structured flow ensures flexible and predictable results, making it a powerful tool for refining and manipulating data.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="predefined-update-options-quick-reference"><a class="header" href="#predefined-update-options-quick-reference">Predefined Update Options Quick Reference</a></h1>
<h2 id="arrays"><a class="header" href="#arrays">Arrays</a></h2>
<h3 id="push"><a class="header" href="#push"><code>$push</code></a></h3>
<p>Adds an element to the end of an array.</p>
<pre><code class="language-javascript">{
    $push: { tags: "designer" }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer"]
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer", "designer"]
}
</code></pre>
<h3 id="pushset"><a class="header" href="#pushset"><code>$pushset</code></a></h3>
<p>Adds an element to the end of an array and removes duplicates.</p>
<pre><code class="language-javascript">{
    $pushset: { tags: "designer" }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer", "designer", "developer"]
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer", "designer"]
}
</code></pre>
<h3 id="pull"><a class="header" href="#pull"><code>$pull</code></a></h3>
<p>Removes a specific element from an array.</p>
<pre><code class="language-javascript">{
    $pull: { tags: "developer" }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer", "designer"]
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    tags: ["designer"]
}
</code></pre>
<h3 id="pullall"><a class="header" href="#pullall"><code>$pullall</code></a></h3>
<p>Removes all occurrences of specified elements from an array.</p>
<pre><code class="language-javascript">{
    $pullall: { tags: ["developer", "designer"] }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    tags: ["developer", "designer", "manager"]
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    tags: ["manager"]
}
</code></pre>
<h2 id="numbers"><a class="header" href="#numbers">Numbers</a></h2>
<h3 id="inc"><a class="header" href="#inc"><code>$inc</code></a></h3>
<p>Increments a numeric value by a given amount.</p>
<pre><code class="language-javascript">{
    $inc: { counter: 1 }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    counter: 5
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    counter: 6
}
</code></pre>
<h3 id="dec"><a class="header" href="#dec"><code>$dec</code></a></h3>
<p>Decrements a numeric value by a given amount.</p>
<pre><code class="language-javascript">{
    $dec: { counter: 1 }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    counter: 5
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    counter: 4
}
</code></pre>
<h2 id="objects"><a class="header" href="#objects">Objects</a></h2>
<h3 id="merge"><a class="header" href="#merge"><code>$merge</code></a></h3>
<p>Merges a nested object, adding or updating properties.</p>
<pre><code class="language-javascript">{
    $merge: { settings: { theme: "dark" } }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    settings: { theme: "light", language: "en" }
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    settings: { theme: "dark", language: "en" }
}
</code></pre>
<h2 id="others"><a class="header" href="#others">Others</a></h2>
<h3 id="unset"><a class="header" href="#unset"><code>$unset</code></a></h3>
<p>Removes a specified key from an object.</p>
<pre><code class="language-javascript">{
    $unset: { age: true }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    name: "John",
    age: 30
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    name: "John"
}
</code></pre>
<h3 id="rename"><a class="header" href="#rename"><code>$rename</code></a></h3>
<p>Renames a key in an object.</p>
<pre><code class="language-javascript">{
    $rename: { firstName: "name" }
}
</code></pre>
<p><strong>Input:</strong></p>
<pre><code class="language-javascript">{
    firstName: "John",
    lastName: "Doe"
}
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-javascript">{
    name: "John",
    lastName: "Doe"
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="remote-database-and-graph-database-client-documentation"><a class="header" href="#remote-database-and-graph-database-client-documentation">Remote Database and Graph Database Client Documentation</a></h1>
<h2 id="remote-object-structure"><a class="header" href="#remote-object-structure"><code>remote</code> object structure.</a></h2>
<ul>
<li><code>name</code> (<code>string</code>): The name of the database.</li>
<li><code>url</code> (<code>string</code>): The URL of the remote database.</li>
<li><code>auth</code> (<code>string</code>): The authentication token for accessing the database.</li>
</ul>
<h2 id="class-databaseremoteremote"><a class="header" href="#class-databaseremoteremote">Class: <code>DataBaseRemote(remote)</code></a></h2>
<p><code>DataBaseRemote</code> is an extended version of the <code>DataBase</code> class, designed to handle API requests. It provides the same functionalities as <code>DataBase</code>, but enables remote communication, allowing you to interact with databases through HTTP requests.</p>
<h2 id="example-usage"><a class="header" href="#example-usage">Example Usage</a></h2>
<pre><code class="language-javascript">const remoteDB = new DataBaseRemote({
    name: 'myRemoteDB',
    url: 'https://example.com/db',
    auth: 'your-auth-token'
});
</code></pre>
<h2 id="class-graphremoteremote"><a class="header" href="#class-graphremoteremote">Class: <code>GraphRemote(remote)</code></a></h2>
<p><code>GraphRemote</code> is an extension of the <code>Graph</code> class, specifically designed for working with graph databases over HTTP. It supports querying and modifying graph data, providing methods tailored for graph operations such as adding nodes, edges, and executing graph queries.</p>
<h2 id="example-usage-1"><a class="header" href="#example-usage-1">Example Usage</a></h2>
<pre><code class="language-javascript">const remoteGraph = new GraphRemote({
    name: 'myRemoteGraph',
    url: 'https://example.com/db',
    auth: 'your-auth-token'
});
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graph-database-documentation"><a class="header" href="#graph-database-documentation">Graph Database Documentation</a></h1>
<p>This documentation provides an overview of the <code>Graph</code> class, which represents a graph database built on top of a custom <code>DataBase</code> module. The <code>Graph</code> class allows for managing graph structures by adding, removing, and querying edges between nodes in the database.</p>
<h2 id="class-graph"><a class="header" href="#class-graph">Class: <code>Graph</code></a></h2>
<h3 id="constructor-graphdatabasefolder"><a class="header" href="#constructor-graphdatabasefolder">Constructor: <code>Graph(databaseFolder)</code></a></h3>
<p>Initializes the graph database.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>databaseFolder</code> (<code>string</code>): The folder where the database is stored.</li>
</ul>
</li>
</ul>
<h3 id="method-async-addcollection-nodea-nodeb"><a class="header" href="#method-async-addcollection-nodea-nodeb">Method: <code>async add(collection, nodeA, nodeB)</code></a></h3>
<p>Adds an edge between two nodes in the specified collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>nodeA</code> (<code>string</code>): The first node.</li>
<li><code>nodeB</code> (<code>string</code>): The second node.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object&gt;</code>: A promise that resolves with the added edge.</li>
</ul>
</li>
</ul>
<h3 id="method-async-removecollection-nodea-nodeb"><a class="header" href="#method-async-removecollection-nodea-nodeb">Method: <code>async remove(collection, nodeA, nodeB)</code></a></h3>
<p>Removes an edge between two nodes in the specified collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>nodeA</code> (<code>string</code>): The first node.</li>
<li><code>nodeB</code> (<code>string</code>): The second node.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the edge is removed, otherwise <code>false</code>.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findcollection-node"><a class="header" href="#method-async-findcollection-node">Method: <code>async find(collection, node)</code></a></h3>
<p>Finds all edges with either node equal to the specified <code>node</code>.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>node</code> (<code>string</code>): The node to search for.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object[]&gt;</code>: A promise that resolves with an array of edges.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findonecollection-nodea-nodeb"><a class="header" href="#method-async-findonecollection-nodea-nodeb">Method: <code>async findOne(collection, nodeA, nodeB)</code></a></h3>
<p>Finds one edge with either <code>nodeA</code> or <code>nodeB</code> as nodes.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
<li><code>nodeA</code> (<code>string</code>): The first node.</li>
<li><code>nodeB</code> (<code>string</code>): The second node.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object|null&gt;</code>: A promise that resolves with the found edge or <code>null</code> if no edge is found.</li>
</ul>
</li>
</ul>
<h3 id="method-async-getallcollection"><a class="header" href="#method-async-getallcollection">Method: <code>async getAll(collection)</code></a></h3>
<p>Gets all edges in the specified collection.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Object[]&gt;</code>: A promise that resolves with all edges in the collection.</li>
</ul>
</li>
</ul>
<h3 id="method-async-getcollections-1"><a class="header" href="#method-async-getcollections-1">Method: <code>async getCollections()</code></a></h3>
<p>Returns the names of all available collections in the database.</p>
<ul>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;string[]&gt;</code>: A promise that resolves with an array of collection names.</li>
</ul>
</li>
</ul>
<h3 id="method-async-checkcollectioncollection-1"><a class="header" href="#method-async-checkcollectioncollection-1">Method: <code>async checkCollection(collection)</code></a></h3>
<p>Checks and creates the specified collection if it doesn't exist.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
</ul>
</li>
</ul>
<h3 id="method-async-issetcollectioncollection-1"><a class="header" href="#method-async-issetcollectioncollection-1">Method: <code>async issetCollection(collection)</code></a></h3>
<p>Checks if the specified collection exists.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;boolean&gt;</code>: A promise that resolves to <code>true</code> if the collection exists, otherwise <code>false</code>.</li>
</ul>
</li>
</ul>
<h3 id="method-removecollectioncollection-1"><a class="header" href="#method-removecollectioncollection-1">Method: <code>removeCollection(collection)</code></a></h3>
<p>Removes the specified collection from the database file system.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>collection</code> (<code>string</code>): The name of the collection to remove.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>void</code></li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="relation-class-documentation"><a class="header" href="#relation-class-documentation">Relation Class Documentation</a></h1>
<p>This documentation provides an overview of the <code>Relation</code> class, which is designed to manage and resolve relations between database collections.</p>
<h2 id="class-relation"><a class="header" href="#class-relation">Class: <code>Relation</code></a></h2>
<h3 id="constructor-relationdatabases"><a class="header" href="#constructor-relationdatabases">Constructor: <code>Relation(databases)</code></a></h3>
<p>Creates a new instance of the <code>Relation</code> class.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>databases</code> (<code>Record&lt;string, Database&gt;</code>): An object containing database instances, where keys are database names.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findpath-string-search-object--function-relations-recordstring-any-options-object"><a class="header" href="#method-async-findpath-string-search-object--function-relations-recordstring-any-options-object">Method: <code>async find(path: string, search: object | Function, relations?: Record&lt;string, any&gt;, options?: object)</code></a></h3>
<p>Finds items with relations based on the provided path and search criteria.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>path</code> (<code>string</code>): Path in format 'dbName.collectionName'.</li>
<li><code>search</code> (<code>object | Function</code>): The search query or function to execute.</li>
<li><code>relations</code> (<code>Record&lt;string, any&gt;</code>, optional): Relations configuration for resolving related data.</li>
<li><code>options</code> (<code>object</code>, optional): Additional search options.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;Array&lt;object&gt;&gt;</code>: A promise that resolves with an array of items, each containing resolved relations.</li>
</ul>
</li>
</ul>
<h3 id="method-async-findonepath-string-search-object--function-relations-recordstring-any"><a class="header" href="#method-async-findonepath-string-search-object--function-relations-recordstring-any">Method: <code>async findOne(path: string, search: object | Function, relations?: Record&lt;string, any&gt;)</code></a></h3>
<p>Finds one item with relations based on the provided path and search criteria.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>path</code> (<code>string</code>): Path in format 'dbName.collectionName'.</li>
<li><code>search</code> (<code>object | Function</code>): The search query or function to execute.</li>
<li><code>relations</code> (<code>Record&lt;string, any&gt;</code>, optional): Relations configuration for resolving related data.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;object | null&gt;</code>: A promise that resolves with the found item containing resolved relations or <code>null</code> if no match is found.</li>
</ul>
</li>
</ul>
<h3 id="method-private-_processitemrelationsitem-object-relations-recordstring-any"><a class="header" href="#method-private-_processitemrelationsitem-object-relations-recordstring-any">Method: <code>private _processItemRelations(item: object, relations: Record&lt;string, any&gt;)</code></a></h3>
<p>Processes relations for a single item.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>item</code> (<code>object</code>): The item to process relations for.</li>
<li><code>relations</code> (<code>Record&lt;string, any&gt;</code>): Relations configuration.</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>Promise&lt;object&gt;</code>: A promise that resolves with the processed item containing resolved relations.</li>
</ul>
</li>
</ul>
<h3 id="private-method-_resolvepathpath-string"><a class="header" href="#private-method-_resolvepathpath-string">Private Method: <code>_resolvePath(path: string)</code></a></h3>
<p>Resolves the relation path in the format 'dbName.collectionName'.</p>
<ul>
<li><strong>Parameters:</strong>
<ul>
<li><code>path</code> (<code>string</code>): The path to resolve, supporting escaped dots (<code>\.</code>).</li>
</ul>
</li>
<li><strong>Returns:</strong>
<ul>
<li><code>{ db: Database; collection: string }</code>: An object containing the resolved database and collection names.</li>
</ul>
</li>
<li><strong>Throws:</strong>
<ul>
<li><code>Error</code>: If the database does not exist or if the path format is invalid.</li>
</ul>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
